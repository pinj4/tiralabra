import unittest
import map_file

class TestGraph(unittest.TestCase):
    def setUp(self):
        self.map = map_file.Map("map_3.map")
    

    def test_create_map_doesnt_work_with_wrong_file_name(self):
        m = map_file.Map("wrong_file.map")
        result = m.create_map()
        self.assertEqual(result, "wrong file")
    
    def test_create_map_works_with_right_file_name(self):
        result = self.map.create_map()
        self.assertEqual(result, "Done")
    
    def test_get_graph_works(self):
        result = self.map.get_graph()
        graph = [[], [], [], [], [], [(6, 1), (10, 1.4142135623730951)], 
        [(5, 1), (7, 1), (9, 1.4142135623730951), (10, 1), (11, 1.4142135623730951)], 
        [(6, 1), (10, 1.4142135623730951), (11, 1)], [], 
        [(6, 1.4142135623730951), (10, 1), (14, 1.4142135623730951)], 
        [(9, 1), (6, 1), (5, 1.4142135623730951), (7, 1.4142135623730951), (11, 1), (13, 1.4142135623730951), (14, 1), 
        (15, 1.4142135623730951)], [(10, 1), (7, 1), (6, 1.4142135623730951), (14, 1.4142135623730951), (15, 1)], [], 
        [(10, 1.4142135623730951), (14, 1)], [(13, 1), (10, 1), (9, 1.4142135623730951), (11, 1.4142135623730951), (15, 1)], 
        [(14, 1), (11, 1), (10, 1.4142135623730951)]]
        self.assertEqual(result, graph)
    
    def test_add_edge_works(self):
        self.map.get_graph()
        self.map.add_edge(0,1,1,1,1)
        result = self.map.graph
        graph = [[(1,1)], [(0,1)], [], [], [], [(6, 1), (10, 1.4142135623730951)], 
        [(5, 1), (7, 1), (9, 1.4142135623730951), (10, 1), (11, 1.4142135623730951)], 
        [(6, 1), (10, 1.4142135623730951), (11, 1)], [], 
        [(6, 1.4142135623730951), (10, 1), (14, 1.4142135623730951)], 
        [(9, 1), (6, 1), (5, 1.4142135623730951), (7, 1.4142135623730951), (11, 1), (13, 1.4142135623730951), (14, 1), 
        (15, 1.4142135623730951)], [(10, 1), (7, 1), (6, 1.4142135623730951), (14, 1.4142135623730951), (15, 1)], [], 
        [(10, 1.4142135623730951), (14, 1)], [(13, 1), (10, 1), (9, 1.4142135623730951), (11, 1.4142135623730951), (15, 1)], 
        [(14, 1), (11, 1), (10, 1.4142135623730951)]]
        self.assertEqual(result, graph)
    
    def test_add_edge_doesnt_work_with_at_nodes(self):
        self.map.get_graph()
        self.map.add_edge(0,1,"@","@",1)
        result = self.map.graph
        graph = [[], [], [], [], [], [(6, 1), (10, 1.4142135623730951)], 
        [(5, 1), (7, 1), (9, 1.4142135623730951), (10, 1), (11, 1.4142135623730951)], 
        [(6, 1), (10, 1.4142135623730951), (11, 1)], [], 
        [(6, 1.4142135623730951), (10, 1), (14, 1.4142135623730951)], 
        [(9, 1), (6, 1), (5, 1.4142135623730951), (7, 1.4142135623730951), (11, 1), (13, 1.4142135623730951), (14, 1), 
        (15, 1.4142135623730951)], [(10, 1), (7, 1), (6, 1.4142135623730951), (14, 1.4142135623730951), (15, 1)], [], 
        [(10, 1.4142135623730951), (14, 1)], [(13, 1), (10, 1), (9, 1.4142135623730951), (11, 1.4142135623730951), (15, 1)], 
        [(14, 1), (11, 1), (10, 1.4142135623730951)]]
        self.assertEqual(result, graph)